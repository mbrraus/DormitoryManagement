@page "/create-item"
@attribute [StreamRendering(true)]
@inject InventoryService InventoryService
@inject NavigationManager NavigationManager


<div class="max-w-screen-sm mx-auto">
    <div class="mb-10">
        @ReusableAssets.PageTitle("Create Item")
    </div>
    <EditForm method="post" Model="@Model" OnValidSubmit="@Submit" FormName="CreateInventory">
        <DataAnnotationsValidator/>
        @ReusableAssets.InputLabel("Name")
        <InputText @bind-Value="@Model!.Name" class="input-field"/>
        <button type="submit" class="large-button mb-6">Create</button>
        <div class="text-sm text-red-600">
            <ValidationSummary/>
        </div>
    </EditForm>
</div>


@code {

    [SupplyParameterFromForm]
    public CreateInventoryRequest? Model { get; set; }

    protected override void OnInitialized() => Model ??= new CreateInventoryRequest();

    private async Task Submit()
    {
        var isCreated = await InventoryService.CreateInventory(Model!);
        if (isCreated)
        {
            NavigationManager.NavigateTo("/inventory-list");
        }
    }

}